# –í–Ω–µ–¥—Ä–µ–Ω–∏–µ kics –≤ –ø–∞–π–ø—ã
```yaml
kics-scan:
  image:
    name: checkmarx/kics:v2.1.5-alpine
    entrypoint: [""]
  variables:
    KICS_LOGLEVEL: INFO
    EXCLUDE_FILES: "node_modules,venv,__pycache__,.terraform,.git,build,dist"
  script:
    - kics scan -p . -o kics_results --report-formats json,html \
      --exclude-paths ${EXCLUDE_FILES} \
      --log-level ${KICS_LOGLEVEL}
```

* **–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å Dockerfile –∏ Helm-—á–∞—Ä—Ç—ã –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ –∏ –ø–ª–æ—Ö–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏**,
* **–≤–Ω–µ–¥—Ä–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ CI**,
* **–∏ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–ø–æ—Ä—Ç –≤ —É–¥–æ–±–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö (`json`, `html`)**.

---

## ‚úÖ –ß—Ç–æ —Ç—ã —ç—Ç–∏–º –ø–æ–∫—Ä—ã–≤–∞–µ—à—å:

| –¶–µ–ª—å               | –ü–æ–∫—Ä—ã—Ç–æ? | –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏                                                                                 |              |
| ------------------ | -------- | ------------------------------------------------------------------------------------------- | ------------ |
| –ê–Ω–∞–ª–∏–∑ Helm-—á–∞—Ä—Ç–æ–≤ | ‚úÖ        | KICS –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `.yaml`, `.tpl`, `.helm`, –∏—â–µ—Ç RBAC, –ø—Ä–∏–≤–∏–ª–µ–≥–∏–∏, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ limits –∏ —Ç.–¥. |              |
| –ê–Ω–∞–ª–∏–∑ Dockerfile  | ‚úÖ        | KICS –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∫–æ–º–∞–Ω–¥—ã, root, —Ç–æ–∫–µ–Ω—ã, `latest`, \`curl                                      | bash\`, etc. |
| Best Practices     | ‚úÖ        | –í—Å—ë, —á—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å—é –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π ‚Äî –ø–æ–∫—Ä—ã—Ç–æ –ø—Ä–∞–≤–∏–ª–∞–º–∏ KICS                   |              |
| CI-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è      | ‚úÖ        | –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ GitLab CI                                                          |              |

---

## üîß –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é (–µ—Å–ª–∏ —Ö–æ—á–µ—à—å —É—Å–∏–ª–∏—Ç—å):

1. **–û—Ç—á–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –∫–∞–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç –≤ CI:**

   ```yaml
   artifacts:
     paths:
       - kics_results
   ```

2. **Fail pipeline –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –Ω–∞—Ö–æ–¥–∫–∞—Ö (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):**

   ```yaml
   script:
     - |
       kics scan -p . -o kics_results --report-formats json \
         --fail-on HIGH,CRITICAL \
         --exclude-paths ${EXCLUDE_FILES} \
         --log-level ${KICS_LOGLEVEL}
   ```

3. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –∫ KICS (–ø–æ –∂–µ–ª–∞–Ω–∏—é):**

   * `hadolint Dockerfile` ‚Äî –≥–ª—É–±–∂–µ —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å Dockerfile
   * `helm lint charts/` ‚Äî —á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Å–∞–º–∏—Ö Helm —à–∞–±–ª–æ–Ω–æ–≤

---

### ‚úÖ –ò—Ç–æ–≥–æ

> –¢–≤–æ—è –∑–∞–¥–∞—á–∞ "–∞–Ω–∞–ª–∏–∑ Helm-—á–∞—Ä—Ç–æ–≤ –∏ Dockerfile –Ω–∞ —É—è–∑–≤–∏–º–æ—Å—Ç–∏ + best practices" **–º–æ–∂–µ—Ç —Å—á–∏—Ç–∞—Ç—å—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–Ω–æ–π**, –µ—Å–ª–∏ KICS –∑–∞–ø—É—â–µ–Ω –≤ —Ç–∞–∫–æ–º –≤–∏–¥–µ.

–ï—Å–ª–∏ —Ö–æ—á–µ—à—å ‚Äî –º–æ–≥—É –ø–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å markdown-–æ—Ç—á—ë—Ç –ø–æ —ç—Ç–æ–π –Ω–µ–¥–µ–ª–µ –≤ DevSecOps-–ø–ª–∞–Ω.
